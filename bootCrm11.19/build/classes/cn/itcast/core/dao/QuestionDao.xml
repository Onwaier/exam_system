<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.itcast.core.dao.QuestionDao">

   <sql id="selectQuestionListWhere">
 		<where>
	      <if test="type != null" >
	        type = #{type}
	      </if>
	      <if test="courseName != null" >
	        and courseName = #{courseName}
	      </if>
	      <if test="qid != null" >
	        and qid = #{qid}
	      </if>
    	</where>
	</sql>
	
	<insert id="addQuestionList" parameterType="question" 
        useGeneratedKeys="true" keyProperty="qid"> 
        insert into question(qid, subject, type, optionA, optionB, optionC, optionD, optionE, optionF, optionG, 
				 answer,  courseName,  analysis,  chapter,  knowPoint,  difficulty, pictureUrl)  
             values(#{qid},#{subject},#{type},#{optionA},#{optionB},#{optionC},#{optionD},#{optionE},#{optionF},#{optionG},
             		#{answer},#{courseName},#{analysis},#{chapter},#{knowPoint},#{difficulty}, #{pictureUrl})  
    </insert>
	
	
	<select id="selectQuestionList" parameterType="question" resultType="question">
		SELECT 
			qid, subject, type, optionA, optionB, optionC, optionD, optionE, optionF, optionG, 
				 answer,  courseName,  analysis,  chapter,  knowPoint,  difficulty, pictureUrl
		FROM
			question
			 
    		
    	<include refid="selectQuestionListWhere"/>
		<if test="start !=null and rows != null">
			limit #{start},#{rows}
		</if>
	</select>
	
	<select id="selectQuestionListCount" parameterType="question" resultType="int">
		select count(*)
		from question
	</select>
	
	<delete id="deleteQuestion" parameterType="long">
		delete from question where qid=#{id}
	</delete>
	
	<!--修改题目信息-->
     <update id="updateQuestion" parameterType="question">
     	UPDATE question SET  subject=#{subject}, type=#{type}, optionA=#{optionA}, optionB=#{optionB},optionC=#{optionC},
     	 optionD=#{optionD}, optionE=#{optionE}, optionF=#{optionF}, optionG=#{optionG}, answer = #{answer}, 
     	 courseName = #{courseName},analysis = #{analysis}, chapter = #{chapter}, knowPoint = #{knowPoint},
     	 difficulty = #{difficulty}, pictureUrl = #{pictureUrl} WHERE qid=#{qid};
     </update>
	
	<!-- 根据多个id查询多道题目where in -->
	<select id="selectQuestionListByIds" resultType="question">
		select *
        from question
        where qid in
        <foreach collection="array" item="qid" index="index"
            open="(" close=")" separator=",">
            #{qid}
        </foreach>
	</select>
</mapper>